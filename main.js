!function(){"use strict";var e="",t=e+"50a1fa46b13495aaccad.svg";const o={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__submit-button",inactiveButtonClass:"modal__submit-button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},r=(e,t,o)=>{e.validity.valid?c(e,t,o):n(e,t,e.validationMessage,o)},n=(e,t,o,r)=>{const n=t.querySelector(`#${e.id}-error`);e.classList.add(r.inputErrorClass),n.textContent=o,n.classList.add(r.errorClass)},c=(e,t,o)=>{const r=t.querySelector(`#${e.id}-error`);e.classList.remove(o.inputErrorClass),r.classList.remove(o.errorClass),r.textContent=""},l=(e,t,o)=>{e.some(e=>!e.validity.valid)?(t.classList.add(o.inactiveButtonClass),t.disabled=!0):(t.classList.remove(o.inactiveButtonClass),t.disabled=!1)};window.validationConfig=o,window.resetFormValidation=(e,t)=>{const o=Array.from(e.querySelectorAll(t.inputSelector)),r=e.querySelector(t.submitButtonSelector);o.forEach(o=>{c(o,e,t)}),r.classList.add(t.inactiveButtonClass),r.disabled=!0},window.revalidateForm=(e,t)=>{const o=Array.from(e.querySelectorAll(t.inputSelector)),n=e.querySelector(t.submitButtonSelector);o.forEach(o=>{r(o,e,t)}),l(o,n,t)};const a=[{name:"Val Thorens",link:e+"418980fdb81d7ceb84cc.jpg"},{name:"Restaurant terrace",link:e+"da7ae2ac910426f62176.jpg"},{name:"An outdoor cafe",link:e+"b431bbb397d7a39486fd.jpg"},{name:"A very long over the forest and through trees",link:e+"44b92084d1c40cb0a70b.jpg"},{name:"Tunnel with morning light",link:e+"ac218ab8ae2c025add31.jpg"},{name:"Mountain house",link:e+"f37cd48ce187723b17f6.jpg"}],i=".modal__form",d=".cards__list";function s(e){if("Escape"===e.key){const e=document.querySelector(".modal_is-opened");e&&m(e)}}function u(e){document.addEventListener("keydown",s),e.classList.add("modal_is-opened")}function m(e){document.removeEventListener("keydown",s),e.classList.add("modal_is-closing"),setTimeout(()=>{e.classList.remove("modal_is-opened","modal_is-closing")},250)}function _(e,t){const o=e.querySelector(".modal__close-button");t&&t.addEventListener("click",()=>u(e)),o&&o.addEventListener("click",()=>m(e)),e.addEventListener("mousedown",t=>{t.target===e&&m(e)})}function p(e,t="append"){const o=document.querySelector(d),r=function(e){const t=document.querySelector("#card-template").content.querySelector(".card").cloneNode(!0),o=t.querySelector(".card__image"),r=t.querySelector(".card__title");return o.src=e.link,o.alt=e.name,r.textContent=e.name,t}(e);"prepend"===t?o.prepend(r):o.append(r)}function f(e){const t=e.target;if(t.classList.contains("card__like-btn"))t.classList.toggle("card__like-btn_active");else if(t.classList.contains("card__delete-btn"))t.closest(".card").remove();else if(t.classList.contains("card__image")){const e=t.closest(".card").querySelector(".card__title").textContent;!function(e,t){const o=document.querySelector("#preview-modal"),r=o.querySelector(".modal__image"),n=o.querySelector(".modal__caption");r.src=e,r.alt=t,n.textContent=t,u(o)}(t.src,e)}}function y(e){e.preventDefault();const t=document.querySelector(".profile__name"),o=document.querySelector(".profile__description"),r=document.querySelector("#profile-name-input"),n=document.querySelector("#profile-description-input");t.textContent=r.value,o.textContent=n.value,m(document.querySelector("#edit-profile-modal"))}function S(e){e.preventDefault();const t=document.querySelector("#card-title-input"),o=document.querySelector("#card-image-input");p({name:t.value,link:o.value},"prepend"),e.target.reset();const r=e.target.querySelector(".modal__submit-button");r.classList.add("modal__submit-button_disabled"),r.disabled=!0,m(document.querySelector("#newPost-modal"))}function v(){const e=document.querySelector("#edit-profile-modal").querySelector(i),t=document.querySelector("#profile-name-input"),r=document.querySelector("#profile-description-input"),n=document.querySelector(".profile__name"),c=document.querySelector(".profile__description");t.value=n.textContent,r.value=c.textContent,window.resetFormValidation&&window.revalidateForm&&(window.resetFormValidation(e,o),window.revalidateForm(e,o))}function q(){const e=document.querySelector("#newPost-modal").querySelector(i);window.resetFormValidation&&window.resetFormValidation(e,o)}var b;b=o,Array.from(document.querySelectorAll(b.formSelector)).forEach(e=>{e.addEventListener("submit",e=>{e.preventDefault()}),((e,t)=>{const o=Array.from(e.querySelectorAll(t.inputSelector)),n=e.querySelector(t.submitButtonSelector);l(o,n,t),o.forEach(c=>{c.addEventListener("input",()=>{r(c,e,t),l(o,n,t)})})})(e,b)}),function(){const e=document.querySelector(".profile__avatar");e&&(e.src=t),a.forEach(e=>p(e)),document.querySelector(d).addEventListener("click",f);const o=document.querySelector("#edit-profile-modal"),r=document.querySelector(".profile__edit-btn"),n=o.querySelector(i);_(o,r),r.addEventListener("click",v),n.addEventListener("submit",y);const c=document.querySelector("#newPost-modal"),l=document.querySelector(".profile__add-btn"),s=c.querySelector(i);_(c,l),l.addEventListener("click",q),s.addEventListener("submit",S),_(document.querySelector("#preview-modal"),null)}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QWFoRixjQUFjUixHQUUvQ3dDLEVBQW9CZ0QsRUFBY0MsR0FDbENBLEVBQWNwRCxpQkFBaUIsUUFBUzJDLEdBQ3hDVSxFQUFZckQsaUJBQWlCLFNBQVVzQyxHQUl2Q25DLEVBRHFCTixTQUFTMUIsY0FBYyxrQkFDVixLQUNwQyxDQU1BbUYsRSIsInNvdXJjZXMiOlsid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzLy4vc3JjL3NjcmlwdHMvdmFsaWRhdGlvbi5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiOyIsIi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIFZBTElEQVRJT04gQ09ORklHVVJBVElPTlxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuZXhwb3J0IGNvbnN0IHZhbGlkYXRpb25Db25maWcgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fc3VibWl0LWJ1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX3N1Ym1pdC1idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXHJcbn07XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBWQUxJREFUSU9OIEZVTkNUSU9OU1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuLy8gQ2hlY2sgaW5wdXQgdmFsaWRpdHlcclxuY29uc3QgY2hlY2tJbnB1dFZhbGlkaXR5ID0gKGlucHV0LCBmb3JtLCBjb25maWcpID0+IHtcclxuICBpZiAoIWlucHV0LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICBzaG93SW5wdXRFcnJvcihpbnB1dCwgZm9ybSwgaW5wdXQudmFsaWRhdGlvbk1lc3NhZ2UsIGNvbmZpZyk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGhpZGVJbnB1dEVycm9yKGlucHV0LCBmb3JtLCBjb25maWcpO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIFNob3cgaW5wdXQgZXJyb3JcclxuY29uc3Qgc2hvd0lucHV0RXJyb3IgPSAoaW5wdXQsIGZvcm0sIGVycm9yTWVzc2FnZSwgY29uZmlnKSA9PiB7XHJcbiAgY29uc3QgZXJyb3JFbGVtZW50ID0gZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dC5pZH0tZXJyb3JgKTtcclxuICBpbnB1dC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZChjb25maWcuZXJyb3JDbGFzcyk7XHJcbn07XHJcblxyXG4vLyBIaWRlIGlucHV0IGVycm9yXHJcbmNvbnN0IGhpZGVJbnB1dEVycm9yID0gKGlucHV0LCBmb3JtLCBjb25maWcpID0+IHtcclxuICBjb25zdCBlcnJvckVsZW1lbnQgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0LmlkfS1lcnJvcmApO1xyXG4gIGlucHV0LmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmVycm9yQ2xhc3MpO1xyXG4gIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbn07XHJcblxyXG4vLyBUb2dnbGUgYnV0dG9uIHN0YXRlXHJcbmNvbnN0IHRvZ2dsZUJ1dHRvblN0YXRlID0gKGlucHV0cywgYnV0dG9uLCBjb25maWcpID0+IHtcclxuICBjb25zdCBoYXNJbnZhbGlkSW5wdXQgPSBpbnB1dHMuc29tZSgoaW5wdXQpID0+ICFpbnB1dC52YWxpZGl0eS52YWxpZCk7XHJcbiAgaWYgKGhhc0ludmFsaWRJbnB1dCkge1xyXG4gICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgYnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICB9IGVsc2Uge1xyXG4gICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgYnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8gQ3JlYXRpbmcgZXZlbnQgbGlzdGVuZXJzIGZvciBpbnB1dHNcclxuY29uc3Qgc2V0RXZlbnRMaXN0ZW5lcnMgPSAoZm9ybSwgY29uZmlnKSA9PiB7XHJcbiAgY29uc3QgaW5wdXRzID0gQXJyYXkuZnJvbShmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmlucHV0U2VsZWN0b3IpKTtcclxuICBjb25zdCBzdWJtaXRCdXR0b24gPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuXHJcbiAgLy8gU2V0IGluaXRpYWwgYnV0dG9uIHN0YXRlXHJcbiAgdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRzLCBzdWJtaXRCdXR0b24sIGNvbmZpZyk7XHJcblxyXG4gIGlucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0LCBmb3JtLCBjb25maWcpO1xyXG4gICAgICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dHMsIHN1Ym1pdEJ1dHRvbiwgY29uZmlnKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuLy8gRW5hYmxlIHZhbGlkYXRpb24gd2l0aCBtYXRjaGluZyBmb3JtIHNlbGVjdG9yXHJcbmV4cG9ydCBjb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKGNvbmZpZykgPT4ge1xyXG4gIGNvbnN0IGZvcm1zID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5mb3JtU2VsZWN0b3IpKTtcclxuICBmb3Jtcy5mb3JFYWNoKChmb3JtKSA9PiB7XHJcbiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcbiAgICBzZXRFdmVudExpc3RlbmVycyhmb3JtLCBjb25maWcpO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gUFVCTElDIEFQSSAtIEV4cG9zZWQgdG8gb3RoZXIgc2NyaXB0c1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuLy8gUmVzZXQgZm9ybSB2YWxpZGF0aW9uIHN0YXRlXHJcbmNvbnN0IHJlc2V0Rm9ybVZhbGlkYXRpb24gPSAoZm9ybSwgY29uZmlnKSA9PiB7XHJcbiAgY29uc3QgaW5wdXRzID0gQXJyYXkuZnJvbShmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmlucHV0U2VsZWN0b3IpKTtcclxuICBjb25zdCBzdWJtaXRCdXR0b24gPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuXHJcbiAgaW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICBoaWRlSW5wdXRFcnJvcihpbnB1dCwgZm9ybSwgY29uZmlnKTtcclxuICB9KTtcclxuXHJcbiAgLy8gRGlzYWJsZSBidXR0b24gYnkgZGVmYXVsdCB3aGVuIHJlc2V0dGluZ1xyXG4gIHN1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICBzdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG59O1xyXG5cclxuLy8gUmV2YWxpZGF0ZSBmb3JtICh1c2VmdWwgd2hlbiBwcmVwb3B1bGF0aW5nIGZpZWxkcylcclxuY29uc3QgcmV2YWxpZGF0ZUZvcm0gPSAoZm9ybSwgY29uZmlnKSA9PiB7XHJcbiAgY29uc3QgaW5wdXRzID0gQXJyYXkuZnJvbShmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmlucHV0U2VsZWN0b3IpKTtcclxuICBjb25zdCBzdWJtaXRCdXR0b24gPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuXHJcbiAgaW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICBjaGVja0lucHV0VmFsaWRpdHkoaW5wdXQsIGZvcm0sIGNvbmZpZyk7XHJcbiAgfSk7XHJcblxyXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0cywgc3VibWl0QnV0dG9uLCBjb25maWcpO1xyXG59O1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gRVhQT1NFIFRPIEdMT0JBTCBTQ09QRVxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxud2luZG93LnZhbGlkYXRpb25Db25maWcgPSB2YWxpZGF0aW9uQ29uZmlnO1xyXG53aW5kb3cucmVzZXRGb3JtVmFsaWRhdGlvbiA9IHJlc2V0Rm9ybVZhbGlkYXRpb247XHJcbndpbmRvdy5yZXZhbGlkYXRlRm9ybSA9IHJldmFsaWRhdGVGb3JtO1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gSU5JVElBTElaRSBWQUxJREFUSU9OXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcbmltcG9ydCBhdmF0YXJJbWFnZSBmcm9tIFwiLi4vaW1hZ2VzL0F2YXRhci5zdmdcIjtcclxuaW1wb3J0IHsgZW5hYmxlVmFsaWRhdGlvbiwgdmFsaWRhdGlvbkNvbmZpZyB9IGZyb20gXCIuLi9zY3JpcHRzL3ZhbGlkYXRpb24uanNcIjtcclxuXHJcbi8vIEltcG9ydGluZyBJbWFnZXNcclxuaW1wb3J0IHZhbFRob3JlbnMgZnJvbSBcIi4uL2ltYWdlcy8xLXBob3RvLWJ5LW1vcml0ei1mZWxkbWFubi1mcm9tLXBleGVscy5qcGdcIjtcclxuaW1wb3J0IHJlc3RhdXJhbnRUZXJyYWNlIGZyb20gXCIuLi9pbWFnZXMvMi1waG90by1ieS1jZWlsaW5lLWZyb20tcGV4ZWxzLmpwZ1wiO1xyXG5pbXBvcnQgb3V0ZG9vckNhZmUgZnJvbSBcIi4uL2ltYWdlcy8zLXBob3RvLWJ5LXR1YmFudXItZG9nYW4tZnJvbS1wZXhlbHMuanBnXCI7XHJcbmltcG9ydCBsb25nRm9yZXN0IGZyb20gXCIuLi9pbWFnZXMvNC1waG90by1ieS1tYXVyaWNlLWxhc2NoZXQtZnJvbS1wZXhlbHMuanBnXCI7XHJcbmltcG9ydCB0dW5uZWxMaWdodCBmcm9tIFwiLi4vaW1hZ2VzLzUtcGhvdG8tYnktdmFuLWFuaC1uZ3V5ZW4tZnJvbS1wZXhlbHMuanBnXCI7XHJcbmltcG9ydCBtb3VudGFpbkhvdXNlIGZyb20gXCIuLi9pbWFnZXMvNi1waG90by1ieS1tb3JpdHotZmVsZG1hbm4tZnJvbS1wZXhlbHMuanBnXCI7XHJcblxyXG4vLyBJbml0aWFsIGNhcmQgZGF0YVxyXG5jb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAgeyBuYW1lOiBcIlZhbCBUaG9yZW5zXCIsIGxpbms6IHZhbFRob3JlbnMgfSxcclxuICB7IG5hbWU6IFwiUmVzdGF1cmFudCB0ZXJyYWNlXCIsIGxpbms6IHJlc3RhdXJhbnRUZXJyYWNlIH0sXHJcbiAgeyBuYW1lOiBcIkFuIG91dGRvb3IgY2FmZVwiLCBsaW5rOiBvdXRkb29yQ2FmZSB9LFxyXG4gIHsgbmFtZTogXCJBIHZlcnkgbG9uZyBvdmVyIHRoZSBmb3Jlc3QgYW5kIHRocm91Z2ggdHJlZXNcIiwgbGluazogbG9uZ0ZvcmVzdCB9LFxyXG4gIHsgbmFtZTogXCJUdW5uZWwgd2l0aCBtb3JuaW5nIGxpZ2h0XCIsIGxpbms6IHR1bm5lbExpZ2h0IH0sXHJcbiAgeyBuYW1lOiBcIk1vdW50YWluIGhvdXNlXCIsIGxpbms6IG1vdW50YWluSG91c2UgfSxcclxuXTtcclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIENPTlNUQU5UU1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5jb25zdCBjb25maWcgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fc3VibWl0LWJ1dHRvblwiLFxyXG4gIGNsb3NlQnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19jbG9zZS1idXR0b25cIixcclxuICBjYXJkU2VsZWN0b3I6IFwiLmNhcmRcIixcclxuICBjYXJkVGVtcGxhdGVTZWxlY3RvcjogXCIjY2FyZC10ZW1wbGF0ZVwiLFxyXG4gIGNhcmRMaXN0U2VsZWN0b3I6IFwiLmNhcmRzX19saXN0XCIsXHJcbiAgc2V0VGltZW91dERlbGF5OiAyNTAsXHJcbn07XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBNT0RBTCBGVU5DVElPTlNcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuZnVuY3Rpb24gaGFuZGxlRXNjYXBlS2V5KGV2dCkge1xyXG4gIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICBjb25zdCBvcGVuTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX2lzLW9wZW5lZFwiKTtcclxuICAgIGlmIChvcGVuTW9kYWwpIHtcclxuICAgICAgY2xvc2VNb2RhbChvcGVuTW9kYWwpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gb3Blbk1vZGFsKG1vZGFsKSB7XHJcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlRXNjYXBlS2V5KTtcclxuICBtb2RhbC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfaXMtb3BlbmVkXCIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjbG9zZU1vZGFsKG1vZGFsKSB7XHJcbiAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlRXNjYXBlS2V5KTtcclxuICBtb2RhbC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfaXMtY2xvc2luZ1wiKTtcclxuICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9pcy1vcGVuZWRcIiwgXCJtb2RhbF9pcy1jbG9zaW5nXCIpO1xyXG4gIH0sIGNvbmZpZy5zZXRUaW1lb3V0RGVsYXkpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzZXR1cE1vZGFsTGlzdGVuZXJzKG1vZGFsLCBvcGVuQnV0dG9uKSB7XHJcbiAgY29uc3QgY2xvc2VCdXR0b24gPSBtb2RhbC5xdWVyeVNlbGVjdG9yKGNvbmZpZy5jbG9zZUJ1dHRvblNlbGVjdG9yKTtcclxuXHJcbiAgaWYgKG9wZW5CdXR0b24pIHtcclxuICAgIG9wZW5CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IG9wZW5Nb2RhbChtb2RhbCkpO1xyXG4gIH1cclxuXHJcbiAgaWYgKGNsb3NlQnV0dG9uKSB7XHJcbiAgICBjbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gY2xvc2VNb2RhbChtb2RhbCkpO1xyXG4gIH1cclxuXHJcbiAgbW9kYWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZXZ0KSA9PiB7XHJcbiAgICBpZiAoZXZ0LnRhcmdldCA9PT0gbW9kYWwpIGNsb3NlTW9kYWwobW9kYWwpO1xyXG4gIH0pO1xyXG59XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBDQVJEIEZVTkNUSU9OU1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5mdW5jdGlvbiBnZXRDYXJkRWxlbWVudChjYXJkRGF0YSkge1xyXG4gIGNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50XHJcbiAgICAucXVlcnlTZWxlY3Rvcihjb25maWcuY2FyZFRlbXBsYXRlU2VsZWN0b3IpXHJcbiAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKGNvbmZpZy5jYXJkU2VsZWN0b3IpO1xyXG4gIFxyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZFRlbXBsYXRlLmNsb25lTm9kZSh0cnVlKTtcclxuICBjb25zdCBjYXJkSW1hZ2UgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG4gIGNvbnN0IGNhcmRUaXRsZSA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XHJcblxyXG4gIGNhcmRJbWFnZS5zcmMgPSBjYXJkRGF0YS5saW5rO1xyXG4gIGNhcmRJbWFnZS5hbHQgPSBjYXJkRGF0YS5uYW1lO1xyXG4gIGNhcmRUaXRsZS50ZXh0Q29udGVudCA9IGNhcmREYXRhLm5hbWU7XHJcblxyXG4gIHJldHVybiBjYXJkRWxlbWVudDtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVuZGVyQ2FyZChjYXJkRGF0YSwgbWV0aG9kID0gXCJhcHBlbmRcIikge1xyXG4gIGNvbnN0IGNhcmRMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb25maWcuY2FyZExpc3RTZWxlY3Rvcik7XHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBnZXRDYXJkRWxlbWVudChjYXJkRGF0YSk7XHJcbiAgXHJcbiAgaWYgKG1ldGhvZCA9PT0gXCJwcmVwZW5kXCIpIHtcclxuICAgIGNhcmRMaXN0LnByZXBlbmQoY2FyZEVsZW1lbnQpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBjYXJkTGlzdC5hcHBlbmQoY2FyZEVsZW1lbnQpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQ2FyZENsaWNrKGV2dCkge1xyXG4gIGNvbnN0IHRhcmdldCA9IGV2dC50YXJnZXQ7XHJcblxyXG4gIC8vIEhhbmRsZSBsaWtlIGJ1dHRvblxyXG4gIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiY2FyZF9fbGlrZS1idG5cIikpIHtcclxuICAgIHRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idG5fYWN0aXZlXCIpO1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgLy8gSGFuZGxlIGRlbGV0ZSBidXR0b25cclxuICBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImNhcmRfX2RlbGV0ZS1idG5cIikpIHtcclxuICAgIHRhcmdldC5jbG9zZXN0KFwiLmNhcmRcIikucmVtb3ZlKCk7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICAvLyBIYW5kbGUgaW1hZ2UgcHJldmlld1xyXG4gIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiY2FyZF9faW1hZ2VcIikpIHtcclxuICAgIGNvbnN0IGNhcmQgPSB0YXJnZXQuY2xvc2VzdChcIi5jYXJkXCIpO1xyXG4gICAgY29uc3QgdGl0bGUgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIikudGV4dENvbnRlbnQ7XHJcbiAgICBvcGVuUHJldmlld01vZGFsKHRhcmdldC5zcmMsIHRpdGxlKTtcclxuICB9XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIFBSRVZJRVcgTU9EQUxcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuZnVuY3Rpb24gb3BlblByZXZpZXdNb2RhbChpbWFnZVNyYywgdGl0bGUpIHtcclxuICBjb25zdCBwcmV2aWV3TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3ByZXZpZXctbW9kYWxcIik7XHJcbiAgY29uc3QgcHJldmlld0ltYWdlID0gcHJldmlld01vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlXCIpO1xyXG4gIGNvbnN0IHByZXZpZXdDYXB0aW9uID0gcHJldmlld01vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2NhcHRpb25cIik7XHJcblxyXG4gIHByZXZpZXdJbWFnZS5zcmMgPSBpbWFnZVNyYztcclxuICBwcmV2aWV3SW1hZ2UuYWx0ID0gdGl0bGU7XHJcbiAgcHJldmlld0NhcHRpb24udGV4dENvbnRlbnQgPSB0aXRsZTtcclxuICBvcGVuTW9kYWwocHJldmlld01vZGFsKTtcclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gRk9STSBIQU5ETEVSU1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5mdW5jdGlvbiBoYW5kbGVFZGl0UHJvZmlsZVN1Ym1pdChldnQpIHtcclxuICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICBcclxuICBjb25zdCBwcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fbmFtZVwiKTtcclxuICBjb25zdCBwcm9maWxlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpO1xyXG4gIGNvbnN0IG5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1uYW1lLWlucHV0XCIpO1xyXG4gIGNvbnN0IGRlc2NJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1kZXNjcmlwdGlvbi1pbnB1dFwiKTtcclxuXHJcbiAgcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSBuYW1lSW5wdXQudmFsdWU7XHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gZGVzY0lucHV0LnZhbHVlO1xyXG5cclxuICBjbG9zZU1vZGFsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZWRpdC1wcm9maWxlLW1vZGFsXCIpKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlTmV3UG9zdFN1Ym1pdChldnQpIHtcclxuICBldnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgY29uc3QgdGl0bGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC10aXRsZS1pbnB1dFwiKTtcclxuICBjb25zdCBpbWFnZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLWltYWdlLWlucHV0XCIpO1xyXG5cclxuICBjb25zdCBjYXJkRGF0YSA9IHtcclxuICAgIG5hbWU6IHRpdGxlSW5wdXQudmFsdWUsXHJcbiAgICBsaW5rOiBpbWFnZUlucHV0LnZhbHVlLFxyXG4gIH07XHJcblxyXG4gIHJlbmRlckNhcmQoY2FyZERhdGEsIFwicHJlcGVuZFwiKTtcclxuXHJcbiAgZXZ0LnRhcmdldC5yZXNldCgpO1xyXG4gIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IGV2dC50YXJnZXQucXVlcnlTZWxlY3Rvcihjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gIHN1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwibW9kYWxfX3N1Ym1pdC1idXR0b25fZGlzYWJsZWRcIik7XHJcbiAgc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuXHJcbiAgY2xvc2VNb2RhbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI25ld1Bvc3QtbW9kYWxcIikpO1xyXG59XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBNT0RBTCBQUkVQQVJBVElPTlxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5mdW5jdGlvbiBwcmVwYXJlRWRpdFByb2ZpbGVNb2RhbCgpIHtcclxuICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZWRpdC1wcm9maWxlLW1vZGFsXCIpO1xyXG4gIGNvbnN0IGZvcm0gPSBtb2RhbC5xdWVyeVNlbGVjdG9yKGNvbmZpZy5mb3JtU2VsZWN0b3IpO1xyXG4gIGNvbnN0IG5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1uYW1lLWlucHV0XCIpO1xyXG4gIGNvbnN0IGRlc2NJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1kZXNjcmlwdGlvbi1pbnB1dFwiKTtcclxuICBjb25zdCBwcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fbmFtZVwiKTtcclxuICBjb25zdCBwcm9maWxlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpO1xyXG5cclxuICBuYW1lSW5wdXQudmFsdWUgPSBwcm9maWxlTmFtZS50ZXh0Q29udGVudDtcclxuICBkZXNjSW5wdXQudmFsdWUgPSBwcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnQ7XHJcblxyXG4gIGlmICh3aW5kb3cucmVzZXRGb3JtVmFsaWRhdGlvbiAmJiB3aW5kb3cucmV2YWxpZGF0ZUZvcm0pIHtcclxuICAgIHdpbmRvdy5yZXNldEZvcm1WYWxpZGF0aW9uKGZvcm0sIHZhbGlkYXRpb25Db25maWcpO1xyXG4gICAgd2luZG93LnJldmFsaWRhdGVGb3JtKGZvcm0sIHZhbGlkYXRpb25Db25maWcpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gcHJlcGFyZU5ld1Bvc3RNb2RhbCgpIHtcclxuICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbmV3UG9zdC1tb2RhbFwiKTtcclxuICBjb25zdCBmb3JtID0gbW9kYWwucXVlcnlTZWxlY3Rvcihjb25maWcuZm9ybVNlbGVjdG9yKTtcclxuXHJcbiAgaWYgKHdpbmRvdy5yZXNldEZvcm1WYWxpZGF0aW9uKSB7XHJcbiAgICB3aW5kb3cucmVzZXRGb3JtVmFsaWRhdGlvbihmb3JtLCB2YWxpZGF0aW9uQ29uZmlnKTtcclxuICB9XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIElOSVRJQUxJWkFUSU9OXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5mdW5jdGlvbiBpbml0KCkge1xyXG5jb25zdCBhdmF0YXJJbWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2F2YXRhclwiKTtcclxuaWYgKGF2YXRhckltZykge1xyXG4gIGF2YXRhckltZy5zcmMgPSBhdmF0YXJJbWFnZTtcclxuICB9XHJcbiAgXHJcbiAgLy8gUmVuZGVyIGluaXRpYWwgY2FyZHNcclxuICBpbml0aWFsQ2FyZHMuZm9yRWFjaCgoY2FyZERhdGEpID0+IHJlbmRlckNhcmQoY2FyZERhdGEpKTtcclxuXHJcbiAgLy8gU2V0dXAgY2FyZCBldmVudCBkZWxlZ2F0aW9uXHJcbiAgY29uc3QgY2FyZExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbmZpZy5jYXJkTGlzdFNlbGVjdG9yKTtcclxuICBjYXJkTGlzdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlQ2FyZENsaWNrKTtcclxuXHJcbiAgLy8gU2V0dXAgRWRpdCBQcm9maWxlIE1vZGFsXHJcbiAgY29uc3QgZWRpdFByb2ZpbGVNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZWRpdC1wcm9maWxlLW1vZGFsXCIpO1xyXG4gIGNvbnN0IGVkaXRQcm9maWxlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ0blwiKTtcclxuICBjb25zdCBlZGl0UHJvZmlsZUZvcm0gPSBlZGl0UHJvZmlsZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoY29uZmlnLmZvcm1TZWxlY3Rvcik7XHJcblxyXG4gIHNldHVwTW9kYWxMaXN0ZW5lcnMoZWRpdFByb2ZpbGVNb2RhbCwgZWRpdFByb2ZpbGVCdXR0b24pO1xyXG4gIGVkaXRQcm9maWxlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBwcmVwYXJlRWRpdFByb2ZpbGVNb2RhbCk7XHJcbiAgZWRpdFByb2ZpbGVGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlRWRpdFByb2ZpbGVTdWJtaXQpO1xyXG5cclxuICAvLyBTZXR1cCBOZXcgUG9zdCBNb2RhbFxyXG4gIGNvbnN0IG5ld1Bvc3RNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbmV3UG9zdC1tb2RhbFwiKTtcclxuICBjb25zdCBuZXdQb3N0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnRuXCIpO1xyXG4gIGNvbnN0IG5ld1Bvc3RGb3JtID0gbmV3UG9zdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoY29uZmlnLmZvcm1TZWxlY3Rvcik7XHJcblxyXG4gIHNldHVwTW9kYWxMaXN0ZW5lcnMobmV3UG9zdE1vZGFsLCBuZXdQb3N0QnV0dG9uKTtcclxuICBuZXdQb3N0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBwcmVwYXJlTmV3UG9zdE1vZGFsKTtcclxuICBuZXdQb3N0Rm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZU5ld1Bvc3RTdWJtaXQpO1xyXG5cclxuICAvLyBTZXR1cCBQcmV2aWV3IE1vZGFsXHJcbiAgY29uc3QgcHJldmlld01vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcmV2aWV3LW1vZGFsXCIpO1xyXG4gIHNldHVwTW9kYWxMaXN0ZW5lcnMocHJldmlld01vZGFsLCBudWxsKTtcclxufVxyXG5cclxuLy8gRW5hYmxlIHZhbGlkYXRpb25cclxuZW5hYmxlVmFsaWRhdGlvbih2YWxpZGF0aW9uQ29uZmlnKTtcclxuXHJcbi8vIFN0YXJ0IGFwcFxyXG5pbml0KCk7Il0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJ2YWxpZGF0aW9uQ29uZmlnIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJjaGVja0lucHV0VmFsaWRpdHkiLCJpbnB1dCIsImZvcm0iLCJjb25maWciLCJ2YWxpZGl0eSIsInZhbGlkIiwiaGlkZUlucHV0RXJyb3IiLCJzaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsImlkIiwiY2xhc3NMaXN0IiwiYWRkIiwidGV4dENvbnRlbnQiLCJyZW1vdmUiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsImlucHV0cyIsImJ1dHRvbiIsInNvbWUiLCJkaXNhYmxlZCIsIndpbmRvdyIsInJlc2V0Rm9ybVZhbGlkYXRpb24iLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwic3VibWl0QnV0dG9uIiwiZm9yRWFjaCIsInJldmFsaWRhdGVGb3JtIiwiaW5pdGlhbENhcmRzIiwibmFtZSIsImxpbmsiLCJoYW5kbGVFc2NhcGVLZXkiLCJldnQiLCJrZXkiLCJvcGVuTW9kYWwiLCJkb2N1bWVudCIsImNsb3NlTW9kYWwiLCJtb2RhbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwic2V0VGltZW91dCIsInNldHVwTW9kYWxMaXN0ZW5lcnMiLCJvcGVuQnV0dG9uIiwiY2xvc2VCdXR0b24iLCJ0YXJnZXQiLCJyZW5kZXJDYXJkIiwiY2FyZERhdGEiLCJtZXRob2QiLCJjYXJkTGlzdCIsImNhcmRFbGVtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsImNhcmRJbWFnZSIsImNhcmRUaXRsZSIsInNyYyIsImFsdCIsImdldENhcmRFbGVtZW50IiwicHJlcGVuZCIsImFwcGVuZCIsImhhbmRsZUNhcmRDbGljayIsImNvbnRhaW5zIiwidG9nZ2xlIiwiY2xvc2VzdCIsInRpdGxlIiwiaW1hZ2VTcmMiLCJwcmV2aWV3TW9kYWwiLCJwcmV2aWV3SW1hZ2UiLCJwcmV2aWV3Q2FwdGlvbiIsIm9wZW5QcmV2aWV3TW9kYWwiLCJoYW5kbGVFZGl0UHJvZmlsZVN1Ym1pdCIsInByZXZlbnREZWZhdWx0IiwicHJvZmlsZU5hbWUiLCJwcm9maWxlRGVzY3JpcHRpb24iLCJuYW1lSW5wdXQiLCJkZXNjSW5wdXQiLCJ2YWx1ZSIsImhhbmRsZU5ld1Bvc3RTdWJtaXQiLCJ0aXRsZUlucHV0IiwiaW1hZ2VJbnB1dCIsInJlc2V0IiwicHJlcGFyZUVkaXRQcm9maWxlTW9kYWwiLCJwcmVwYXJlTmV3UG9zdE1vZGFsIiwiZSIsInNldEV2ZW50TGlzdGVuZXJzIiwiYXZhdGFySW1nIiwiYXZhdGFySW1hZ2UiLCJlZGl0UHJvZmlsZU1vZGFsIiwiZWRpdFByb2ZpbGVCdXR0b24iLCJlZGl0UHJvZmlsZUZvcm0iLCJuZXdQb3N0TW9kYWwiLCJuZXdQb3N0QnV0dG9uIiwibmV3UG9zdEZvcm0iLCJpbml0Il0sInNvdXJjZVJvb3QiOiIifQ==